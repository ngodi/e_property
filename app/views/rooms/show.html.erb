<div class="card card-default">
    <div class="card-body">
        <div class="row">
            <div class="col-md-12">
                <%= image_tag @images[0], width: "100%", height: "600px", class: "img-responsive" %>
            </div>
        </div>
        <br>

        <div class="row">
            <div class="col-md-8">
                <div class="row">
                    <div class="col-md-3 text-center">
                        <%= image_tag avatar_url(@room.user), class: "img-circle avatar-large" %>
                        <%= @room.user.fullname %>
                    </div>

                    <div class="col-md-9">
                        <h4><%= @room.listing_name %></h4>
                        <%= @room.address %>
                        <br>

                         <div class="row text-center row-space-1">
                            <div class="col-md-3">
                                <i class="fa fa-home fa-2x"></i><br>
                                <%= @room.home_type%>
                            </div>
                            <div class="col-md-3">
                                <i class="fa fa-users fa-2x"></i><br>
                                <%= pluralize(@room.accommodate, "Guest") %>
                            </div>
                            <div class="col-md-3">
                                <i class="fa fa-bed fa-2x"></i><br>
                                <%= pluralize(@room.bed_room, "Bedroom") %>
                            </div>
                            <div class="col-md-3">
                                <i class="fa fa-ship fa-2x"></i><br>
                                <%= pluralize(@room.bath_room, "Bathroom") %>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-10 mx-auto">
                        <h2>About This Listing</h2>
                        <p><%= @room.summary %></p>
                    </div>
                </div>
                <br>
                <div class="row">
                    
                    <div class="col-md-10 mx-auto">
                       <h2>Amenities</h2>
                        <div class="row">
                            <div class="col-md-6">
                                <ul class="amenities">
                                    <li class="<%= 'text-line-through' if !@room.is_tv %>">TV</li>
                                    <li class="<%= 'text-line-through' if !@room.is_kitchen %>">Kitchen</li>
                                    <li class="<%= 'text-line-through' if !@room.is_internet %>">Internet</li>
                                </ul>
                            </div>
                             <div class="col-md-6">
                                <li class="<%= 'text-line-through' if !@room.is_heating %>">Heating</li>
                                <li class="<%= 'text-line-through' if !@room.is_air%>">Air Conditioning</li>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="col-md-4">
                <%= render 'reservations/form' %>
            </div>

        </div>

        <div class="row">
            <div class="col-md-10 col-md-offset-1 mx-auto">
                <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    <% if @images %>
                        <% @images.each do |image| %>
                            <div class="carousel-item <%= 'active' if image.id == @images[0].id %>">
                               <%= image_tag image, class: "d-block w-100", height: "400px", alt: "listing image" %>
                            </div>
                        <% end %>
                    <% end %>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
                </div>
            </div>
        </div>
<!--
        <div class="row">
            <div class="col-md-12">
                <div id="map"></div>
                <style>
                    #map {
                        width: 100%;
                        height: 400px;
                    }
                </style>
                <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAd1xUtF__lMatGqxgo0mR8hjJtfZkXmsA" async defer data-turbolinks-eval="false"></script>
                <script>
                    function initialize() {
                        var mapCanvas = document.getElementById('map');
                        var mapOptions = {
                            center: new google.maps.LatLng (<%= @room.latitude %>, <%= @room.longitude%>),
                            zoom: 14,
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                        }
                        var map = new google.maps.Map(mapCanvas, mapOptions)
                    }
                    google.maps.event.addDomListener(window, 'load', initialize);
                </script>
            </div>
        </div>
-->
        <div class="row">
            <div class="col-md-12">
                <h3 class="text-center">Nearby Listings</h3>
               <% if @room.nearbys %>
                   <% for room in @room.nearbys(10) %>
                    <div class="car card-default">
                        <div class="card-heading"><%= link_to room.listing_name, room_path(room) %></div>
                        <div class="card-body">
                           <h5> (<%= room.distance.round(2) %>  miles away)</h5>
                           <%= image_tag room.images[0] , width: "250px", height: "250px" %>
                        </div>
                    </div>
                  <% end %>
               <% end %>
            </div>
        </div>
    </div>
</div>
